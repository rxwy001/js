#!name=油管去广告
#!desc=测试

url_rewrites:
  - match: (^https?:\/\/(?!r\d-)[\w-]+\.googlevideo\.com\/(?!dclk_video_ads).+?)\/ctier\/L(\/.+?)%2Cctier(%2C.+?)((\/probe\/1)|$)
    location: $1$2$3
    status_code: 302
  - match: (^https?:\/\/(?!r\d-)[\w-]+\.googlevideo\.com\/(?!dclk_video_ads).+?)\/ctier\/L(\/.+?),ctier(,.+?)((\/probe\/1)|$)
    location: $1$2$3
    status_code: 302
  - match: (^https?:\/\/(?!r\d-)[\w-]+\.googlevideo\.com\/(?!dclk_video_ads).+?)&ctier=L(&.+?),ctier(,.+?)((&probe=1)|$)
    location: $1$2$3
    status_code: 302
  - match: (^https?:\/\/(?!((r\d-)|manifest))[\w-]+\.googlevideo\.com\/(?!dclk_video_ads).+?)&ctier=L(&.+?),ctier(,.+?)((&probe=1)|$)
    location: $1$4$5
    status_code: 302
  - match: (^https?:\/\/(?!((r\d-)|manifest))[\w-]+\.googlevideo\.com\/(?!dclk_video_ads).+?)\/ctier\/L(\/.+?),ctier(,.+?)((\/probe\/1)|$)
    location: $1$4$5
    status_code: 302
  - match: (^https?:\/\/(?!((r\d-)|manifest))[\w-]+\.googlevideo\.com\/(?!dclk_video_ads).+?)\/ctier\/L(\/.+?)%2Cctier(%2C.+?)((\/probe\/1)|$)
    location: $1$4$5
    status_code: 302
mitm:
  hostnames:
    - '-redirector*.googlevideo.com'
    - '*.googlevideo.com'
    - www.youtube.com
    - s.youtube.com
    - youtubei.googleapis.com
